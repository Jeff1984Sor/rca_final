<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}Gestão de Casos{% endblock %}</title>
    <!-- SCRIPT DO HTMX -->
    <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
    <style>
        /* Colocamos todo o CSS comum aqui */
        body { font-family: Arial, sans-serif; margin: 0; background-color: #f4f4f9; }
        .navbar { background-color: #333; overflow: hidden; display: flex; justify-content: space-between; align-items: center; padding: 0 20px; }
        .navbar-links a { color: white; padding: 20px 16px; text-decoration: none; font-size: 17px; display: inline-block; }
        .navbar-links a:hover { background-color: #ddd; color: black; }
        .navbar-auth { display: flex; align-items: center; }
        .navbar-auth span { color: #ccc; padding-right: 15px; }
        .navbar-auth a { color: white; padding: 20px 16px; text-decoration: none; font-size: 17px; display: inline-block; }
        .navbar-auth a:hover { background-color: #007BFF; color: white; }
        .container { padding: 20px; }
    </style>
    {% block extra_css %}{% endblock %} <!-- Espaço para CSS específico da página -->
</head>
<body>
    {% csrf_token %}

    <div class="navbar">
        <div class="navbar-links">
            <a href="{% url 'core:home' %}">Início</a>
            <a href="{% url 'casos:lista_casos' %}">Casos</a>
            <a href="{% url 'clientes:lista_clientes' %}">Clientes</a>
            <a href="#">Equipamentos</a>
        </div>
        <div class="navbar-auth">
            {% if user.is_authenticated %}
                <span>Olá, {{ user.username }}</span>
                <a href="{% url 'logout' %}">Sair</a>
            {% else %}
                <a href="{% url 'login' %}">Entrar</a>
            {% endif %}
        </div>
    </div>

    <div class="container">
        {% block content %}
        {% endblock %}
    </div>

    <!-- SCRIPT DE CONFIGURAÇÃO DO HTMX PARA CSRF -->
    <script>
        document.body.addEventListener('htmx:configRequest', (event) => {
            event.detail.headers['X-CSRFToken'] = document.querySelector('input[name="csrfmiddlewaretoken"]').value;
        })
    </script>

    <!-- ESPAÇO PARA O JAVASCRIPT DAS PÁGINAS FILHAS -->
    {% block extra_js %}{% endblock %}

</body>
</html>