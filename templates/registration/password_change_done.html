{% extends "base.html" %}

{% block title %}Senha Alterada | Sistema Jur√≠dico{% endblock %}

{% block extra_css %}
<style>
/* ==================================================================== */
/* üé® DESIGN SYSTEM - PASSWORD CHANGED SUCCESS */
/* ==================================================================== */
:root {
    --primary: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    --primary-solid: #667eea;
    --success: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
    --success-solid: #10b981;
    --danger: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    --danger-solid: #ef4444;
    --warning: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    --warning-solid: #f59e0b;
    --info: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    --info-solid: #0ea5e9;
    
    --gray-50: #f8fafc;
    --gray-100: #f1f5f9;
    --gray-200: #e2e8f0;
    --gray-300: #cbd5e1;
    --gray-400: #94a3b8;
    --gray-500: #64748b;
    --gray-600: #475569;
    --gray-700: #334155;
    --gray-800: #1e293b;
    --gray-900: #0f172a;
    
    --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
    --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
    --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    --shadow-2xl: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    
    --transition: 250ms ease-in-out;
}

body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    background-attachment: fixed;
    min-height: 100vh;
}

.success-container {
    max-width: 600px;
    margin: 80px auto;
    padding: 0 20px;
    animation: fadeInUp 0.6s ease-out;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(40px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* ==================================================================== */
/* ‚úÖ SUCCESS CARD */
/* ==================================================================== */
.success-card {
    background: rgba(255, 255, 255, 0.98);
    backdrop-filter: blur(20px) saturate(180%);
    border-radius: 28px;
    padding: 60px 50px;
    box-shadow: var(--shadow-2xl);
    border: 1px solid rgba(255, 255, 255, 0.4);
    position: relative;
    overflow: hidden;
    text-align: center;
}

.success-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 6px;
    background: var(--success);
    animation: shimmer 3s infinite;
}

@keyframes shimmer {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
}

/* ==================================================================== */
/* üéâ SUCCESS ICON */
/* ==================================================================== */
.success-icon-container {
    position: relative;
    width: 140px;
    height: 140px;
    margin: 0 auto 32px;
}

.success-icon {
    width: 140px;
    height: 140px;
    background: var(--success);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 20px 40px rgba(16, 185, 129, 0.3);
    animation: successBounce 0.8s cubic-bezier(0.36, 0, 0.66, -0.56) 0.2s both;
    position: relative;
    z-index: 2;
}

@keyframes successBounce {
    0% {
        transform: scale(0) rotate(-45deg);
        opacity: 0;
    }
    50% {
        transform: scale(1.2) rotate(10deg);
    }
    100% {
        transform: scale(1) rotate(0deg);
        opacity: 1;
    }
}

.success-icon i {
    font-size: 4rem;
    color: white;
    animation: checkmarkDraw 0.5s ease-out 0.8s both;
}

@keyframes checkmarkDraw {
    0% {
        transform: scale(0);
        opacity: 0;
    }
    50% {
        transform: scale(1.2);
    }
    100% {
        transform: scale(1);
        opacity: 1;
    }
}

/* C√≠rculos decorativos */
.success-ring {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    border-radius: 50%;
    border: 3px solid rgba(16, 185, 129, 0.2);
    animation: expandRing 1.5s ease-out infinite;
}

.success-ring:nth-child(1) {
    width: 140px;
    height: 140px;
    animation-delay: 0s;
}

.success-ring:nth-child(2) {
    width: 140px;
    height: 140px;
    animation-delay: 0.5s;
}

.success-ring:nth-child(3) {
    width: 140px;
    height: 140px;
    animation-delay: 1s;
}

@keyframes expandRing {
    0% {
        width: 140px;
        height: 140px;
        opacity: 1;
    }
    100% {
        width: 220px;
        height: 220px;
        opacity: 0;
    }
}

/* ==================================================================== */
/* üìù SUCCESS CONTENT */
/* ==================================================================== */
.success-title {
    font-size: 2.25rem;
    font-weight: 800;
    color: var(--gray-900);
    margin: 0 0 16px;
    letter-spacing: -0.5px;
    animation: slideIn 0.6s ease-out 0.4s both;
}

@keyframes slideIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.success-message {
    font-size: 1.15rem;
    color: var(--gray-600);
    margin: 0 0 40px;
    line-height: 1.6;
    animation: slideIn 0.6s ease-out 0.6s both;
}

/* ==================================================================== */
/* üìã INFO BOX */
/* ==================================================================== */
.info-box {
    background: linear-gradient(135deg, rgba(102, 126, 234, 0.05) 0%, rgba(16, 185, 129, 0.05) 100%);
    border: 2px solid var(--success-solid);
    border-radius: 16px;
    padding: 24px 28px;
    margin: 32px 0;
    text-align: left;
    animation: slideIn 0.6s ease-out 0.8s both;
}

.info-box-title {
    font-size: 1rem;
    font-weight: 700;
    color: var(--gray-900);
    margin: 0 0 16px;
    display: flex;
    align-items: center;
    gap: 10px;
}

.info-box-title i {
    color: var(--success-solid);
    font-size: 1.1rem;
}

.info-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.info-list li {
    padding: 10px 0;
    color: var(--gray-700);
    font-size: 0.95rem;
    display: flex;
    align-items: flex-start;
    gap: 12px;
    line-height: 1.5;
}

.info-list li i {
    color: var(--success-solid);
    margin-top: 3px;
    font-size: 0.9rem;
    flex-shrink: 0;
}

.info-list li:not(:last-child) {
    border-bottom: 1px solid var(--gray-100);
}

/* ==================================================================== */
/* üéØ ACTIONS */
/* ==================================================================== */
.success-actions {
    display: flex;
    gap: 16px;
    justify-content: center;
    flex-wrap: wrap;
    margin-top: 40px;
    animation: slideIn 0.6s ease-out 1s both;
}

.btn {
    padding: 14px 32px;
    border-radius: 14px;
    border: none;
    font-weight: 700;
    font-size: 1rem;
    cursor: pointer;
    transition: all var(--transition);
    display: inline-flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    box-shadow: var(--shadow-md);
}

.btn:hover {
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
}

.btn-primary {
    background: var(--primary);
    color: white;
}

.btn-secondary {
    background: white;
    color: var(--gray-700);
    border: 2px solid var(--gray-300);
}

.btn i {
    font-size: 1.1rem;
}

/* ==================================================================== */
/* üéä CONFETTI ANIMATION */
/* ==================================================================== */
.confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    background: var(--success-solid);
    position: absolute;
    animation: confettiFall 3s ease-out forwards;
    pointer-events: none;
}

@keyframes confettiFall {
    0% {
        transform: translateY(0) rotateZ(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotateZ(720deg);
        opacity: 0;
    }
}

/* ==================================================================== */
/* ‚è±Ô∏è COUNTDOWN */
/* ==================================================================== */
.redirect-notice {
    margin-top: 32px;
    padding: 20px;
    background: var(--gray-50);
    border-radius: 12px;
    border: 2px dashed var(--gray-300);
    animation: slideIn 0.6s ease-out 1.2s both;
}

.redirect-notice p {
    margin: 0;
    color: var(--gray-600);
    font-size: 0.95rem;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.countdown {
    font-weight: 700;
    color: var(--primary-solid);
    font-size: 1.1rem;
}

.redirect-notice i {
    color: var(--info-solid);
    animation: spin 2s linear infinite;
}

@keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ==================================================================== */
/* üì± RESPONSIVIDADE */
/* ==================================================================== */
@media (max-width: 640px) {
    .success-container {
        margin: 40px auto;
    }
    
    .success-card {
        padding: 40px 28px;
        border-radius: 24px;
    }

    .success-title {
        font-size: 1.75rem;
    }

    .success-message {
        font-size: 1rem;
    }

    .success-icon-container {
        width: 110px;
        height: 110px;
    }

    .success-icon {
        width: 110px;
        height: 110px;
    }

    .success-icon i {
        font-size: 3rem;
    }

    .success-actions {
        flex-direction: column;
    }

    .success-actions .btn {
        width: 100%;
        justify-content: center;
    }

    .info-box {
        padding: 20px;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="success-card">
        
        <!-- üéâ SUCCESS ICON -->
        <div class="success-icon-container">
            <div class="success-ring"></div>
            <div class="success-ring"></div>
            <div class="success-ring"></div>
            <div class="success-icon">
                <i class="fa-solid fa-check"></i>
            </div>
        </div>

        <!-- üìù SUCCESS MESSAGE -->
        <h1 class="success-title">Senha Alterada com Sucesso!</h1>
        <p class="success-message">
            Sua senha foi atualizada com √™xito. Agora voc√™ pode usar sua nova senha para acessar o sistema.
        </p>

        <!-- üìã INFO BOX -->
        <div class="info-box">
            <h3 class="info-box-title">
                <i class="fa-solid fa-shield-halved"></i>
                Dicas de Seguran√ßa
            </h3>
            <ul class="info-list">
                <li>
                    <i class="fa-solid fa-check-circle"></i>
                    <span>Use uma senha forte com letras, n√∫meros e caracteres especiais</span>
                </li>
                <li>
                    <i class="fa-solid fa-check-circle"></i>
                    <span>N√£o compartilhe sua senha com ningu√©m</span>
                </li>
                <li>
                    <i class="fa-solid fa-check-circle"></i>
                    <span>Troque sua senha regularmente para maior seguran√ßa</span>
                </li>
                <li>
                    <i class="fa-solid fa-check-circle"></i>
                    <span>Evite usar a mesma senha em diferentes sistemas</span>
                </li>
            </ul>
        </div>

        <!-- üéØ ACTIONS -->
        <div class="success-actions">
            <a href="{% url 'casos:lista_casos' %}" class="btn btn-primary">
                <i class="fa-solid fa-house"></i>
                Ir para Dashboard
            </a>
            <a href="{% url 'logout' %}" class="btn btn-secondary">
                <i class="fa-solid fa-right-from-bracket"></i>
                Fazer Logout
            </a>
        </div>

        <!-- ‚è±Ô∏è AUTO-REDIRECT (OPCIONAL) -->
        <div class="redirect-notice" id="redirectNotice" style="display: none;">
            <p>
                <i class="fa-solid fa-circle-notch"></i>
                Redirecionando em <span class="countdown" id="countdown">5</span> segundos...
            </p>
        </div>

    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('‚úÖ Senha alterada com sucesso!');
    
    // üéä CONFETTI CELEBRATION
    function createConfetti() {
        const colors = ['#10b981', '#667eea', '#4facfe', '#f093fb', '#38ef7d'];
        const confettiCount = 50;
        
        for (let i = 0; i < confettiCount; i++) {
            setTimeout(() => {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                confetti.style.left = Math.random() * 100 + '%';
                confetti.style.top = '-10px';
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = Math.random() * 10 + 5 + 'px';
                confetti.style.height = confetti.style.width;
                confetti.style.animationDelay = Math.random() * 0.5 + 's';
                confetti.style.animationDuration = Math.random() * 2 + 2 + 's';
                
                document.body.appendChild(confetti);
                
                setTimeout(() => confetti.remove(), 3000);
            }, i * 30);
        }
    }
    
    // Iniciar confetti ap√≥s anima√ß√µes do card
    setTimeout(() => {
        createConfetti();
    }, 1000);
    
    // üîä SOUND EFFECT (OPCIONAL)
    function playSuccessSound() {
        try {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            oscillator.frequency.value = 800;
            oscillator.type = 'sine';
            
            gainNode.gain.setValueAtTime(0.3, context.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, context.currentTime + 0.5);
            
            oscillator.start(context.currentTime);
            oscillator.stop(context.currentTime + 0.5);
        } catch (e) {
            console.log('Som n√£o dispon√≠vel');
        }
    }
    
    setTimeout(() => {
        playSuccessSound();
    }, 800);
    
    // ‚è±Ô∏è AUTO-REDIRECT COUNTDOWN (DESCOMENTE PARA ATIVAR)
    /*
    const redirectNotice = document.getElementById('redirectNotice');
    const countdownEl = document.getElementById('countdown');
    let countdown = 5;
    
    if (redirectNotice && countdownEl) {
        redirectNotice.style.display = 'block';
        
        const interval = setInterval(() => {
            countdown--;
            countdownEl.textContent = countdown;
            
            if (countdown <= 0) {
                clearInterval(interval);
                window.location.href = "{% url 'casos:lista_casos' %}";
            }
        }, 1000);
    }
    */
    
    // üé® PARALLAX EFFECT (DESKTOP ONLY)
    if (window.innerWidth > 768) {
        const card = document.querySelector('.success-card');
        
        document.addEventListener('mousemove', function(e) {
            const x = (window.innerWidth / 2 - e.pageX) / 50;
            const y = (window.innerHeight / 2 - e.pageY) / 50;
            
            card.style.transform = `perspective(1000px) rotateY(${x}deg) rotateX(${y}deg)`;
        });
        
        document.addEventListener('mouseleave', function() {
            card.style.transform = 'perspective(1000px) rotateY(0deg) rotateX(0deg)';
        });
    }
    
    // ‚ö° KEYBOARD SHORTCUTS
    document.addEventListener('keydown', function(e) {
        // H = Home/Dashboard
        if (e.key === 'h' || e.key === 'H') {
            if (!e.target.matches('input, textarea')) {
                window.location.href = "{% url 'casos:lista_casos' %}";
            }
        }
        
        // L = Logout
        if (e.key === 'l' || e.key === 'L') {
            if (!e.target.matches('input, textarea')) {
                window.location.href = "{% url 'logout' %}";
            }
        }
    });
    
    // üìä LOG ANALYTICS (OPCIONAL)
    console.log('üìä Evento: Senha alterada com sucesso');
    console.log('‚è∞ Timestamp:', new Date().toISOString());
    
    // üéØ TRACK USER ACTION (Se tiver analytics)
    if (typeof gtag !== 'undefined') {
        gtag('event', 'password_changed', {
            'event_category': 'security',
            'event_label': 'success'
        });
    }
    
    console.log('üí° Dicas:');
    console.log('   - Pressione "H" para ir ao dashboard');
    console.log('   - Pressione "L" para fazer logout');
    console.log('   - Sua senha foi alterada com sucesso!');
});
</script>
{% endblock %}