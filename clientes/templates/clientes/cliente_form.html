{% extends 'base.html' %}
{% load static %}

{% block title %}{% if form.instance.pk %}Editar Cliente{% else %}Criar Novo Cliente{% endif %} | Sistema Jurídico{% endblock %}

{% block content %}

    
    <!-- HERO HEADER -->
    <div class="hero-header">
        <h1 class="hero-title">
            <i class="fa-solid fa-{% if form.instance.pk %}pen-to-square{% else %}plus-circle{% endif %}"></i>
            {% if form.instance.pk %}Editar Cliente{% else %}Criar Novo Cliente{% endif %}
        </h1>
        <p class="hero-subtitle text-muted">
            {% if form.instance.pk %}Atualize as informações do cliente{% else %}Preencha os dados do novo cliente{% endif %}
        </p>
    </div>
    
    <!-- FORM CARD -->
    <div class="card">
        <form method="post" id="clienteForm">
            {% csrf_token %}
            
            <!-- DADOS BÁSICOS -->
            <div class="form-section">
                <h3 class="form-section-title"><i class="fa-solid fa-circle-info"></i> Dados Básicos</h3>
                <div class="form-row">
                    {% include "clientes/_form_field.html" with field=form.nome classes="full-width" %}
                    
                    <div class="form-group">
                        <label for="{{ form.tipo.id_for_label }}" class="form-label"><i class="fa-solid fa-id-card"></i> {{ form.tipo.label }}</label>
                        {{ form.tipo }}
                        <div id="tipoPreview" class="tipo-preview">
                            <i id="tipoIcon"></i>
                            <div class="tipo-preview-text">
                                <div class="tipo-preview-label">Tipo Selecionado</div>
                                <div id="tipoValue" class="tipo-preview-value">-</div>
                            </div>
                        </div>
                    </div>
                    
                    {% include "clientes/_form_field.html" with field=form.contato_empresa %}
                </div>
            </div>
            
            <!-- ENDEREÇO -->
            <div class="form-section">
                <h3 class="form-section-title"><i class="fa-solid fa-map-marker-alt"></i> Endereço</h3>
                <div class="form-row">
                    {% include "clientes/_form_field.html" with field=form.logradouro classes="full-width" %}
                    {% include "clientes/_form_field.html" with field=form.cidade %}
                    {% include "clientes/_form_field.html" with field=form.uf %}
                </div>
            </div>
            
            <!-- BOTÕES -->
            <div class="form-actions">
                <a href="{% url 'clientes:lista_clientes' %}" class="btn btn-outline-secondary"><i class="fa-solid fa-times-circle"></i> Cancelar</a>
                <button type="submit" class="btn btn-primary" id="submitBtn">
                    <i class="fa-solid fa-save"></i> {% if form.instance.pk %}Salvar Alterações{% else %}Criar Cliente{% endif %}
                </button>
            </div>
        </form>
    </div>

{% endblock %}

{% block extra_js %}
<script src="{% static 'js/form_cliente.js' %}"></script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        initClienteForm({
            listUrl: "{% url 'clientes:lista_clientes' %}"
        });
    });
</script>
{% endblock %}