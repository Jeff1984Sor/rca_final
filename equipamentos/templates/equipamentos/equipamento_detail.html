{% extends 'base.html' %}
{% load static %}

{% block title %}{{ equipamento.nome_item }} | Sistema Jurídico{% endblock %}

{% block content %}
<div class="detalhes-container">
    
    <!-- HERO HEADER -->
    <div class="hero-header">
        <div class="hero-content">
            <div class="hero-left">
                <div class="hero-icon pulse">
                    <i class="fa-solid fa-laptop"></i>
                </div>
                <div class="hero-text">
                    <div class="hero-label text-muted">Equipamento</div>
                    <h1 class="hero-title">{{ equipamento.nome_item }}</h1>
                    {% if equipamento.status %}
                    <div class="status-badge-large {{ equipamento.status.nome|lower }}">
                        <i class="fa-solid fa-circle"></i>
                        {{ equipamento.status.nome }}
                    </div>
                    {% endif %}
                </div>
            </div>
            <div class="hero-actions">
                <a href="{% url 'equipamentos:equipamento_update' pk=equipamento.pk %}" class="btn action-btn btn-edit">
                    <i class="fa-solid fa-pen-to-square"></i> Editar
                </a>
                <a href="{% url 'equipamentos:equipamento_list' %}" class="btn btn-outline-secondary">
                    <i class="fa-solid fa-arrow-left"></i> Voltar
                </a>
            </div>
        </div>
    </div>

    <!-- INFO CARDS GRID -->
    <div class="info-cards-grid">
        
        <!-- IDENTIFICAÇÃO -->
        <div class="info-card identificacao">
            <div class="card-header">
                <div class="card-icon"><i class="fa-solid fa-id-card"></i></div>
                <h3 class="card-title">Identificação</h3>
            </div>
            <div class="card-body">
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-tag"></i> Tipo</div><div class="info-value {% if not equipamento.tipo_item %}empty{% endif %}">{{ equipamento.tipo_item.nome|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-layer-group"></i> Categoria</div><div class="info-value {% if not equipamento.categoria_item %}empty{% endif %}">{{ equipamento.categoria_item.nome|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-copyright"></i> Marca</div><div class="info-value {% if not equipamento.marca %}empty{% endif %}">{{ equipamento.marca.nome|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-microchip"></i> Modelo</div><div class="info-value copyable {% if not equipamento.modelo %}empty{% endif %}">{{ equipamento.modelo|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-barcode"></i> Service Tag (S/N)</div><div class="info-value copyable {% if not equipamento.etiqueta_servico_dell %}empty{% endif %}">{{ equipamento.etiqueta_servico_dell|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-network-wired"></i> Hostname</div><div class="info-value copyable {% if not equipamento.hostname %}empty{% endif %}">{{ equipamento.hostname|default:"Não informado" }}</div></div>
            </div>
        </div>

        <!-- RESPONSABILIDADE -->
        <div class="info-card responsabilidade">
            <div class="card-header">
                <div class="card-icon"><i class="fa-solid fa-user-gear"></i></div>
                <h3 class="card-title">Responsabilidade</h3>
            </div>
            <div class="card-body">
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-user"></i> Responsável</div><div class="info-value {% if not equipamento.responsavel %}empty{% endif %}">{{ equipamento.responsavel.get_full_name|default:"Não atribuído" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-envelope"></i> E-mail</div><div class="info-value copyable {% if not equipamento.responsavel.email %}empty{% endif %}">{{ equipamento.responsavel.email|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-phone"></i> Telefone</div><div class="info-value copyable {% if not equipamento.telefone_usuario %}empty{% endif %}">{{ equipamento.telefone_usuario|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-desktop"></i> AnyDesk</div><div class="info-value copyable {% if not equipamento.anydesk %}empty{% endif %}">{{ equipamento.anydesk|default:"Não configurado" }}</div></div>
            </div>
        </div>

        <!-- AQUISIÇÃO -->
        <div class="info-card aquisicao">
            <div class="card-header">
                <div class="card-icon"><i class="fa-solid fa-shopping-cart"></i></div>
                <h3 class="card-title">Aquisição</h3>
            </div>
            <div class="card-body">
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-calendar"></i> Data da Compra</div><div class="info-value {% if not equipamento.data_compra %}empty{% endif %}">{{ equipamento.data_compra|date:"d/m/Y"|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-store"></i> Loja</div><div class="info-value {% if not equipamento.loja_compra %}empty{% endif %}">{{ equipamento.loja_compra|default:"Não informado" }}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-dollar-sign"></i> Valor Pago</div><div class="info-value valor-destaque {% if not equipamento.valor_pago %}empty{% endif %}">{% if equipamento.valor_pago %}R$ {{ equipamento.valor_pago|floatformat:2 }}{% else %}Não informado{% endif %}</div></div>
                <div class="info-row"><div class="info-label"><i class="fa-solid fa-wallet"></i> Pago Por</div><div class="info-value {% if not equipamento.pago_por %}empty{% endif %}">{{ equipamento.get_pago_por_display|default:"Não informado" }}</div></div>
            </div>
        </div>
    </div>

    <!-- OBSERVAÇÕES -->
    {% if equipamento.observacoes %}
    <div class="observacoes-card">
        <div class="observacoes-header">
            <div class="observacoes-icon"><i class="fa-solid fa-note-sticky"></i></div>
            <h3 class="observacoes-title">Observações</h3>
        </div>
        <div class="observacoes-content">
            {{ equipamento.observacoes }}
        </div>
    </div>
    {% endif %}

</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/detalhes_equipamento.js' %}"></script>
<script>
    // Inicializa o script da página passando os URLs necessários
    document.addEventListener('DOMContentLoaded', function() {
        initDetalhesEquipamento({
            editUrl: "{% url 'equipamentos:equipamento_update' pk=equipamento.pk %}",
            listUrl: "{% url 'equipamentos:equipamento_list' %}"
        });
    });
</script>
{% endblock %}